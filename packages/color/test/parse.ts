/* eslint-disable @typescript-eslint/quotes */
//import fs from 'fs-extra';
import expect from '../util/expect';
import color from '../src/color';

import type { Color } from '../src/color';

// const units: Record<string, { options?: StringFormat; tests: Record<string, [ Color, string ]> }> =
//     JSON.parse(fs.readFileSync('./test/data/string.json', 'utf-8'));

const units: [ string, Color ][] = [
    [ "rgb(1 2 3)",             { "r": 1,    "g": 2,  "b": 3 }],
    [ "rgb(10% 20% 30%)",       { "r": 25.5, "g": 51, "b": 76.5 }],
    [ "rgb(1 2 3 / 25%)",       { "r": 1,    "g": 2,  "b": 3,   alpha: 0.25 }],
    [ "rgb(1 2 3 / 0.25)",      { "r": 1,    "g": 2,  "b": 3,   alpha: 0.25 }],
    [ "#010203",                { "r": 1,    "g": 2,  "b": 3 }],
    [ "#010203FF",              { "r": 1,    "g": 2,  "b": 3,   alpha: 1 }],
    [ "#123",                   { "r": 17,   "g": 34, "b": 51 }],
    [ "#123F",                  { "r": 17,   "g": 34, "b": 51,  alpha: 1 }],
    [ "blue",                   { "r": 0,    "g": 0,  "b": 255 }],
    [ "rgb(1, 2, 3)",           { "r": 1,    "g": 2,  "b": 3 }],
    [ "rgb(10%, 20%, 30%)",     { "r": 25.5, "g": 51, "b": 76.5 }],
    [ "rgba(1, 2, 3, 0.25)",    { "r": 1,    "g": 2,  "b": 3,   alpha: 0.25 }],

    [ "hsl(90 2 3)",            { "h": 90,   "s": 2,  "l": 3 }],
    [ "hsl(90deg 2 3)",         { "h": 90,   "s": 2,  "l": 3 }],
    [ "hsl(0.25turn 2 3)",      { "h": 90,   "s": 2,  "l": 3 }],
    [ "hsl(100grad 2 3)",       { "h": 90,   "s": 2,  "l": 3 }],
    [ "hsl(1.5708rad 2 3)",     { "h": 90,   "s": 2,  "l": 3 }],
    [ "hsl(1 2% 3)",            { "h": 1,    "s": 2,  "l": 3 }],
    [ "hsl(1 2 3%)",            { "h": 1,    "s": 2,  "l": 3 }],
    [ "hsl(1 2 3 / 50%)",       { "h": 1,    "s": 2,  "l": 3, alpha: 0.50 }],
    [ "hsl(1 2 3 / 0.5)",       { "h": 1,    "s": 2,  "l": 3, alpha: 0.50 }],
    [ "hsl(1, 2, 3)",           { "h": 1,    "s": 2,  "l": 3 }],
    [ "hsla(1, 2, 3, 0.5)",     { "h": 1,    "s": 2,  "l": 3, alpha: 0.50 }],

    [ "hsv(90 2 3)",            { "h": 90,   "s": 2,  "v": 3 }],
    [ "hsv(90deg 2 3)",         { "h": 90,   "s": 2,  "v": 3 }],
    [ "hsv(0.25turn 2 3)",      { "h": 90,   "s": 2,  "v": 3 }],
    [ "hsv(100grad 2 3)",       { "h": 90,   "s": 2,  "v": 3 }],
    [ "hsv(1.5708rad 2 3)",     { "h": 90,   "s": 2,  "v": 3 }],
    [ "hsv(1 2% 3)",            { "h": 1,    "s": 2,  "v": 3 }],
    [ "hsv(1 2 3%)",            { "h": 1,    "s": 2,  "v": 3 }],
    [ "hsv(1 2 3 / 50%)",       { "h": 1,    "s": 2,  "v": 3, alpha: 0.50 }],
    [ "hsv(1 2 3 / 0.5)",       { "h": 1,    "s": 2,  "v": 3, alpha: 0.50 }],
    [ "hsv(1, 2, 3)",           { "h": 1,    "s": 2,  "v": 3 }],
    [ "hsv(1, 2, 3, 0.5)",      { "h": 1,    "s": 2,  "v": 3, alpha: 0.50 }],

    [ "hsi(90 2 3)",            { "h": 90,   "s": 2,  "i": 3 }],
    [ "hsi(90deg 2 3)",         { "h": 90,   "s": 2,  "i": 3 }],
    [ "hsi(0.25turn 2 3)",      { "h": 90,   "s": 2,  "i": 3 }],
    [ "hsi(100grad 2 3)",       { "h": 90,   "s": 2,  "i": 3 }],
    [ "hsi(1.5708rad 2 3)",     { "h": 90,   "s": 2,  "i": 3 }],
    [ "hsi(1 2% 3)",            { "h": 1,    "s": 2,  "i": 3 }],
    [ "hsi(1 2 3%)",            { "h": 1,    "s": 2,  "i": 3 }],
    [ "hsi(1 2 3 / 50%)",       { "h": 1,    "s": 2,  "i": 3, alpha: 0.50 }],
    [ "hsi(1 2 3 / 0.5)",       { "h": 1,    "s": 2,  "i": 3, alpha: 0.50 }],
    [ "hsi(1, 2, 3)",           { "h": 1,    "s": 2,  "i": 3 }],
    [ "hsi(1, 2, 3, 0.5)",      { "h": 1,    "s": 2,  "i": 3, alpha: 0.50 }],

    [ "hwb(90 2 3)",            { "h": 90,   "w": 2,  "b": 3 }],
    [ "hwb(90deg 2 3)",         { "h": 90,   "w": 2,  "b": 3 }],
    [ "hwb(0.25turn 2 3)",      { "h": 90,   "w": 2,  "b": 3 }],
    [ "hwb(100grad 2 3)",       { "h": 90,   "w": 2,  "b": 3 }],
    [ "hwb(1.5708rad 2 3)",     { "h": 90,   "w": 2,  "b": 3 }],
    [ "hwb(1 2% 3)",            { "h": 1,    "w": 2,  "b": 3 }],
    [ "hwb(1 2 3%)",            { "h": 1,    "w": 2,  "b": 3 }],
    [ "hwb(1 2 3 / 50%)",       { "h": 1,    "w": 2,  "b": 3, alpha: 0.50 }],
    [ "hwb(1 2 3 / 0.5)",       { "h": 1,    "w": 2,  "b": 3, alpha: 0.50 }],
    [ "hwb(1, 2, 3)",           { "h": 1,    "w": 2,  "b": 3 }],
    [ "hwb(1, 2, 3, 0.5)",      { "h": 1,    "w": 2,  "b": 3, alpha: 0.50 }],

    [ "hcg(90 2 3)",            { "h": 90,   "c": 2,  "g": 3 }],
    [ "hcg(90deg 2 3)",         { "h": 90,   "c": 2,  "g": 3 }],
    [ "hcg(0.25turn 2 3)",      { "h": 90,   "c": 2,  "g": 3 }],
    [ "hcg(100grad 2 3)",       { "h": 90,   "c": 2,  "g": 3 }],
    [ "hcg(1.5708rad 2 3)",     { "h": 90,   "c": 2,  "g": 3 }],
    [ "hcg(1 2% 3)",            { "h": 1,    "c": 2,  "g": 3 }],
    [ "hcg(1 2 3%)",            { "h": 1,    "c": 2,  "g": 3 }],
    [ "hcg(1 2 3 / 50%)",       { "h": 1,    "c": 2,  "g": 3, alpha: 0.50 }],
    [ "hcg(1 2 3 / 0.5)",       { "h": 1,    "c": 2,  "g": 3, alpha: 0.50 }],
    [ "hcg(1, 2, 3)",           { "h": 1,    "c": 2,  "g": 3 }],
    [ "hcg(1, 2, 3, 0.5)",      { "h": 1,    "c": 2,  "g": 3, alpha: 0.50 }],

    [ "cmy(1 2 3)",             { "c": 1,    "m": 2,  "y": 3 }],
    [ "cmy(1% 2% 3%)",          { "c": 1,    "m": 2,  "y": 3 }],
    [ "cmy(1 2 3 / 50%)",       { "c": 1,    "m": 2,  "y": 3, alpha: 0.50 }],
    [ "cmy(1 2 3 / 0.5)",       { "c": 1,    "m": 2,  "y": 3, alpha: 0.50 }],
    [ "cmy(1, 2, 3)",           { "c": 1,    "m": 2,  "y": 3 }],
    [ "cmy(1, 2, 3, 0.5)",      { "c": 1,    "m": 2,  "y": 3, alpha: 0.50 }],

    [ "cmyk(1 2 3 4)",             { "c": 1,    "m": 2,  "y": 3, k: 4 }],
    [ "cmyk(1% 2% 3% 4)",          { "c": 1,    "m": 2,  "y": 3, k: 4 }],
    [ "cmyk(1 2 3 4 / 50%)",       { "c": 1,    "m": 2,  "y": 3, k: 4, alpha: 0.50 }],
    [ "cmyk(1 2 3 4 / 0.5)",       { "c": 1,    "m": 2,  "y": 3, k: 4, alpha: 0.50 }],
    [ "cmyk(1, 2, 3, 4)",          { "c": 1,    "m": 2,  "y": 3, k: 4 }],
    [ "cmyk(1, 2, 3, 4, 0.5)",     { "c": 1,    "m": 2,  "y": 3, k: 4, alpha: 0.50 }],
    [ "device-cmyk(1 2 3 4)",             { "c": 1,    "m": 2,  "y": 3, k: 4 }],

    [ "xyz(1 2 3)",             { "x": 1,    "y": 2,  "z": 3 }],
    [ "xyz(1 2 3 / 50%)",       { "x": 1,    "y": 2,  "z": 3, alpha: 0.50 }],
    [ "xyz(1 2 3 / 0.5)",       { "x": 1,    "y": 2,  "z": 3, alpha: 0.50 }],
    [ "xyz(1, 2, 3)",           { "x": 1,    "y": 2,  "z": 3 }],
    [ "xyz(1, 2, 3, 0.5)",      { "x": 1,    "y": 2,  "z": 3, alpha: 0.50 }],
    [ "color(xyz 1 2 3)",             { "x": 1,    "y": 2,  "z": 3 }],
    [ "color(xyz 1 2 3 / 0.5)",       { "x": 1,    "y": 2,  "z": 3, alpha: 0.50 }],

    [ "lab(1 2 3)",             { "l": 1,    "a": 2,  "b": 3 }],
    [ "lab(1% 2 3)",            { "l": 1,    "a": 2,  "b": 3 }],
    [ "lab(1 2 3 / 50%)",       { "l": 1,    "a": 2,  "b": 3, alpha: 0.50 }],
    [ "lab(1 2 3 / 0.5)",       { "l": 1,    "a": 2,  "b": 3, alpha: 0.50 }],
    [ "lab(1, 2, 3)",           { "l": 1,    "a": 2,  "b": 3 }],
    [ "lab(1, 2, 3, 0.5)",      { "l": 1,    "a": 2,  "b": 3, alpha: 0.50 }],

    [ "lch(1 2 3)",             { "l": 1,    "c": 2,  "h": 3 }],
    [ "lch(1% 2 3)",            { "l": 1,    "c": 2,  "h": 3 }],
    [ "lch(1 2 3 / 50%)",       { "l": 1,    "c": 2,  "h": 3, alpha: 0.50 }],
    [ "lch(1 2 3 / 0.5)",       { "l": 1,    "c": 2,  "h": 3, alpha: 0.50 }],
    [ "lch(1, 2, 3)",           { "l": 1,    "c": 2,  "h": 3 }],
    [ "lch(1, 2, 3, 0.5)",      { "l": 1,    "c": 2,  "h": 3, alpha: 0.50 }],
    [ "lch(1 2 90)",            { "l": 1, "c": 2, "h": 90 }],
    [ "lch(1 2 90deg)",         { "l": 1, "c": 2, "h": 90 }],
    [ "lch(1 2 0.25turn)",      { "l": 1, "c": 2, "h": 90 }],
    [ "lch(1 2 100grad)",       { "l": 1, "c": 2, "h": 90 }],
    [ "lch(1 2 1.5708rad)",     { "l": 1, "c": 2, "h": 90 }],

];

describe(
    'color.parse',
    () => {
        test.each(units)(
            '%s',
            (src, dst) => {
                expect(color.parse(src)).toEqual(dst);
            }
        );
    }
);
